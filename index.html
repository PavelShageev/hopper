<!DOCTYPE html>
<html>
<head>
    <title>Brisbane CityHopper Map</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0; padding: 0 }
        #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBMQL45Z38wCIcjJDDZFUpjVBI2tVULGzA&sensor=true">
    </script>
    <script type="text/javascript" src="markerwithlabel.js"></script>
    <script type="text/javascript">
        var markers, boats, path, b, info, infoPosition, map;

        var stations = ["North Quay", "Southbank 3", "Maritime Museum", "Thornton Street", "Eagle Street Pier", "Holman Street", "Dockside", "Sydney Street"];

        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(-27.4723762, 153.0349049),
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map-canvas"),
                    mapOptions);
            var iconDock = "http://hopper.shageev.com/img/dock.png";
            var iconBoat = "http://hopper.shageev.com/img/boat.png";
            path = [[0,0], [-27.474793,153.042137],[-27.47437,153.04137],[-27.47369,153.04061],[-27.47282,153.03978],
            [-27.472439,153.039050],[-27.47075,153.03953],[-27.46929,153.03919],[-27.46767,153.03882],[-27.46620,153.03835],
            [-27.46464,153.03732],[-27.46379,153.03601],[-27.46441,153.03406],[-27.465711,153.033533],[-27.46622,153.03274],[-27.46701,153.03191],[-27.468766,153.030972],[-27.46877,153.03213],
            [-27.47066,153.03273],[-27.471235,153.033993],[-27.47256,153.03301],[-27.47494,153.03316],[-27.47747,153.03301],[-27.47942,153.03226],[-27.48126,153.03039],[-27.481842,153.028288],
            [-27.48103,153.02766],[-27.48008,153.02610],[-27.479777,153.025072],[-27.47843,153.02502],[-27.47624,153.02380],[-27.47433,153.02271],[-27.472907,153.022603],[-27.47441,153.02292],
            [-27.47570,153.02382],[-27.47742,153.02496],[-27.47884,153.02537],[-27.479777,153.025072],[-27.48077,153.02676],[-27.481842,153.028288],[-27.48181,153.03020],[-27.48048,153.03230],
            [-27.47858,153.03320],[-27.47565,153.03363],[-27.47275,153.03333],[-27.471235,153.033993],[-27.47110,153.03283],[-27.46967,153.03161],[-27.468766,153.030972],[-27.46792,153.03210],
            [-27.46649,153.03305],[-27.465711,153.033533],[-27.46451,153.03371],[-27.46319,153.03528],[-27.46379,153.03751],[-27.46535,153.03854],[-27.46723,153.03929],[-27.46818,153.03931],
            [-27.46984,153.03944],[-27.47127,153.03955],[-27.472439,153.039050],[-27.47374,153.04065]];
            //   0              5             10             15             20             25             30             35             40             45             50            55           59
            b=[[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//0
                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//1
                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//2
                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//3
                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//4
                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//5
                 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//6
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//7
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//8
                 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//9
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//10
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//11
                 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//12
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//13
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//14
                 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//15
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//16
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//17
                 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//18
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//19
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//20
                 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//21
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//22
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1],//23
            [  22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//0
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//1
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//2
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//3
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//4
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//5
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//6
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//7
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//9
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//9
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//10
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//11
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//12
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//13
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//14
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//15
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//16
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//17
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//18
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//19
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//20
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//21
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//22
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21],//23
           //   0              5             10             15             20             25             30             35             40             45             50            55           59
            [  43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//0
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//1
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//2
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//3
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//4
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,//5
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//6
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//7
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//8
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//9
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//10
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//11
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//12
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//13
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//14
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//15
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//16
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//17
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//18
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//19
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,//20
                43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,//21
                22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42,43,44,45,45,45,46,47,48,48,48,49,50,51,51,51,52,53,54,55,56,57,58,59,60,60,60,61, 1, 1, 1,//22
                1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 8, 9,10,11,12,13,13,13,14,15,16,16,16,17,18,19,19,19,20,21,22,23,24,25,25,26,27,28,28,29,30,31,32,32,32,32,33,34,35,36,37,37,37,38,39,39,39,40,41,42]//23]
            ];

            boats = [];
            boats[0] = new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                map: map,
                icon: iconBoat,
                zIndex: 500
            });
            boats[1] = new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                map: map,
                icon: iconBoat,
                zIndex: 501
            });
            boats[2] = new google.maps.Marker({
                position: new google.maps.LatLng(0, 0),
                map: map,
                icon: iconBoat,
                zIndex: 502
            });


            markers = [];
            markers[0] = new google.maps.Marker({
                position: new google.maps.LatLng(-27.472907, 153.022603),
                map: map,
                title: stations[0],
                icon: iconDock
            });
            google.maps.event.addListener(markers[0], 'mousedown', function(){
                infoPosition = 0;
                prepareInfo();
                info.open(map, markers[0]);
            });
            markers[1] = new google.maps.Marker({
                position: new google.maps.LatLng(-27.479777, 153.025072),
                map: map,
                icon: iconDock,
                title: stations[1]
            });
            google.maps.event.addListener(markers[1], 'mousedown', function(){
                infoPosition = 1;
                prepareInfo();
                info.open(map, markers[1]);
            });
            markers[2] = new google.maps.Marker({
                position: new google.maps.LatLng(-27.481842, 153.028288),
                map: map,
                icon: iconDock,
                title: stations[2]
            });
            google.maps.event.addListener(markers[2], 'mousedown', function(){
                infoPosition = 2;
                prepareInfo();
                info.open(map, markers[2]);
            });
            markers[3] = new google.maps.Marker({
                position: new google.maps.LatLng(-27.471235, 153.033993),
                map: map,
                icon: iconDock,
                title: stations[3]
            });
            google.maps.event.addListener(markers[3], 'mousedown', function(){
                infoPosition = 3;
                prepareInfo();
                info.open(map, markers[3]);
            });
            markers[4] = new google.maps.Marker({
                position: new google.maps.LatLng(-27.468766, 153.030972),
                map: map,
                icon: iconDock,
                title: stations[4]
            });
            google.maps.event.addListener(markers[4], 'mousedown', function(){
                infoPosition = 4;
                prepareInfo();
                info.open(map, markers[4]);
            });
            markers[5] = new google.maps.Marker({
                position: new google.maps.LatLng(-27.465711, 153.033533),
                map: map,
                icon: iconDock,
                title: stations[5]
            });
            google.maps.event.addListener(markers[5], 'mousedown', function(){
                infoPosition = 5;
                prepareInfo();
                info.open(map, markers[5]);
            });
            markers[6] = new google.maps.Marker({
                position: new google.maps.LatLng(-27.472439, 153.039050),
                map: map,
                icon: iconDock,
                title: stations[6]
            });
            google.maps.event.addListener(markers[6], 'mousedown', function(){
                infoPosition = 6;
                prepareInfo();
                info.open(map, markers[6]);
            });
            markers[7] = new google.maps.Marker({
                position: new google.maps.LatLng(-27.474793, 153.042137),
                map: map,
                icon: iconDock,
                title: stations[7]
            });
            google.maps.event.addListener(markers[7], 'mousedown', function(){
                infoPosition = 7;
                prepareInfo();
                info.open(map, markers[7]);
            });
            infoPosition = -1;
            info = new google.maps.InfoWindow();
            //markers[0].setMap(map);
            setInterval(update, 20);
        }

        function showTitle(num){
           return "<h3>"+stations[num]+"</h3>";
        }

        function countUpTime(num){
            var time = new Date();
            var lookFor = [32,28,25,19,16,13,5,1];
            var h = time.getHours();
            var m = time.getMinutes();
            var offset = h*60 + m;
            var closest = -1;
            var nextDay = false;
            while(closest < 0){
                offset++;
                if(offset == b[0].length){
                    offset = 0;
                    nextDay = true;
                }
                if(b[0][offset] == lookFor[num] || b[1][offset] == lookFor[num] || b[2][offset] == lookFor[num])
                    closest = offset;
            }
            var nextH = Math.floor(closest/60);
            var nextM = closest - nextH * 60;
            var nextTime;
            if(nextDay){
                var tomorrow = new Date(time.getTime() + 24 * 60 * 60 * 1000);
                nextTime = new Date(tomorrow.getFullYear(), tomorrow.getMonth(), tomorrow.getDate(), nextH, nextM, 0);
            } else
                nextTime = new Date(time.getFullYear(), time.getMonth(), time.getDate(), nextH, nextM, 0);
            return "to North Quay <p align='right'> <b>"+timeLeft(time, nextTime)+" </b> left</p>";
        }

        function countDownTime(num){
            var time = new Date();
            var lookFor = [32,37,39,45,48,51,60,1];
            var h = time.getHours();
            var m = time.getMinutes();
            var offset = h*60 + m;
            var closest = -1;
            var nextDay = false;
            while(closest < 0){
                offset++;
                if(offset == b[0].length){
                    offset = 0;
                    nextDay = true;
                }
                if(b[0][offset] == lookFor[num] || b[1][offset] == lookFor[num] || b[2][offset] == lookFor[num])
                    closest = offset;
            }
            var nextH = Math.floor(closest/60);
            var nextM = closest - nextH * 60;
            var nextTime;
            if(nextDay){
                var tomorrow = new Date(time.getTime() + 24 * 60 * 60 * 1000);
                nextTime = new Date(tomorrow.getFullYear(), tomorrow.getMonth(), tomorrow.getDate(), nextH, nextM, 0);
            } else
                nextTime = new Date(time.getFullYear(), time.getMonth(), time.getDate(), nextH, nextM, 0);
            return "to Sydney Street <p align='right'> <b>"+timeLeft(time, nextTime)+" </b> left</p>";
        }

        function timeLeft(time, next){
            var dH, dM, addS;
            var diff = next.getTime() - time.getTime();
            var res = "";
            if (diff > 60 * 60 * 1000) {
                dH = Math.floor(diff / 60 / 60 / 1000);
                addS = "";
                if (dH > 1)
                    addS = "s";
                res += " " + dH.toString() + " hour" + addS;
                diff -= dH * 60 * 60 * 1000;
            }
            if (diff > 60 * 1000) {
                dM = Math.floor(diff / 60 / 1000);
                addS = "";
                if (dM > 1)
                    addS = "s";
                res += " " + dM.toString() + " minute"+addS;
            }

            return res;
        }

        function prepareInfo() {
            switch(infoPosition){
                case 0:
                    //to Sydney Street only (downstream)
                    info.setContent(showTitle(infoPosition) + countDownTime(infoPosition));
                    break;
                case 7:
                    //to North Quay only (upstream)
                    info.setContent(showTitle(infoPosition) + countUpTime(infoPosition));
                    break;
                default:
                    // both directions
                    info.setContent(showTitle(infoPosition) + countDownTime(infoPosition) +"<br>" + countUpTime(infoPosition));

                    break;
            }
        }

        function update(){
            var d = new Date();
            var h = d.getHours();
            var m = d.getMinutes();
            var s = d.getSeconds();
            var ms = d.getMilliseconds();
            for(var i = 0; i< boats.length; i++) {
                var offset = h*60+m;
                var nextpoint = offset + 1;
                if(nextpoint >= b[i].length)
                    nextpoint = 0;

                if(b[i][offset]!=0 && b[i][nextpoint]!=0){
                    var dx = path[b[i][offset]][0] - path[b[i][nextpoint]][0];
                    var dy = path[b[i][offset]][1] - path[b[i][nextpoint]][1];
                    var delta = (s + ms/1000)/60;
                    var x = path[b[i][offset]][0] - dx * delta;
                    var y = path[b[i][offset]][1] - dy * delta;
                    boats[i].setPosition(new google.maps.LatLng(x,y));
                } else
                    boats[i].setPosition(new google.maps.LatLng(path[b[i][offset]][0],path[b[i][offset]][1]));
            }

        }
        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</head>
<body>
<div id="map-canvas"></div>
</body>
</html>